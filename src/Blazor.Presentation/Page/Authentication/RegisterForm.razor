<EditForm Model="@RegisterRequest" OnValidSubmit="SubmitAsync">

    <FluentValidationValidator />

    <MudText Typo="Typo.h4"
             GutterBottom="true">
        Sign Up
    </MudText>

    <MudText>
        Already have an account? <MudLink Href=@LoginRoute>Login</MudLink>
    </MudText>

    <MudStack Spacing="4" Class="my-4">
        <MudTextField Label="Username"
                  @bind-Value="RegisterRequest.UserName"
                  For="@(() => RegisterRequest.UserName)"
                  Variant="Variant.Outlined" />

        <MudTextField Label="Email Address"
                      @bind-Value="RegisterRequest.Email"
                      For="@(() => RegisterRequest.Email)"
                      Variant="Variant.Outlined" />

        <MudTextField Label="Password"
                      @bind-Value="RegisterRequest.Password"
                      For="@(() => RegisterRequest.Password)"
                      Variant="Variant.Outlined"
                      InputType="@ToggleVisibility.InputType"
                      Adornment="Adornment.End"
                      AdornmentIcon="@ToggleVisibility.InputIcon"
                      OnAdornmentClick="ToggleVisibility.ToggleVisibility" />

        <MudTextField Label="Confirm Password"
                      @bind-Value="RegisterRequest.PasswordConfirmation"
                      For="@(() => RegisterRequest.PasswordConfirmation)"
                      Variant="Variant.Outlined"
                      InputType="@ToggleVisibility.InputType"
                      Adornment="Adornment.End"
                      AdornmentIcon="@ToggleVisibility.InputIcon"
                      OnAdornmentClick="ToggleVisibility.ToggleVisibility" />
    </MudStack>

    <MudStack Spacing="2">
        <MudButton ButtonType="ButtonType.Submit" 
                   Variant="Variant.Filled"
                   Color="Color.Primary"
                   Size="Size.Large"
                   Disabled="IsProcessing"
                   FullWidth="true">
            @if (IsProcessing)
            {
                <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true"/>
                <MudText Class="ms-2">Processing</MudText>
            }
            else
            {
                <MudText>
                    Sign Up
                </MudText>
            }
        </MudButton>
        <MudButton ButtonType="ButtonType.Button"
                   Variant="Variant.Text"
                   Color="Color.Info"
                   Size="Size.Small"
                   Disabled="IsProcessing"
                   FullWidth="true"
                   Href="/">

            <MudText>
                Home
            </MudText>
        </MudButton>
    </MudStack>
</EditForm>